{"openapi":"3.1.0","info":{"title":"Olevium API","description":"API de gestión financiera personal con sistema de autenticación dual","version":"1.0.0"},"paths":{"/api/auth/signup":{"post":{"tags":["Auth"],"summary":"Registro de Usuario","description":"Crea una nueva cuenta de usuario en la plataforma. No requiere autenticación previa.","operationId":"signup_api_auth_signup_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserCreate"}}},"required":true},"responses":{"201":{"description":"Usuario creado exitosamente","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserOut"},"example":{"user_id":1,"name":"Juan Pérez","email":"juan@ejemplo.com","created_at":"2025-07-22T10:30:00"}}}},"400":{"description":"Datos inválidos o email ya registrado","content":{"application/json":{"example":{"detail":"El email ya está registrado"}}}},"422":{"description":"Error de validación en los datos enviados","content":{"application/json":{"example":{"detail":"Email inválido"}}}}}}},"/api/auth/verify-email/{token}":{"get":{"tags":["Auth"],"summary":"Verificación de Email","description":"Verifica el email de un usuario usando el token enviado por correo electrónico.","operationId":"verify_email_api_auth_verify_email__token__get","parameters":[{"name":"token","in":"path","required":true,"schema":{"type":"string","title":"Token"}}],"responses":{"200":{"description":"Email verificado exitosamente","content":{"application/json":{"schema":{},"example":{"detail":"Email verificado exitosamente","email_verified":true}}}},"400":{"description":"Token inválido, expirado o ya utilizado","content":{"application/json":{"examples":{"token_invalido":{"summary":"Token inválido","value":{"detail":"Token de verificación inválido o expirado"}},"token_usado":{"summary":"Token ya utilizado","value":{"detail":"Token no encontrado o ya utilizado"}},"token_expirado":{"summary":"Token expirado","value":{"detail":"Token de verificación expirado"}}}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/auth/login":{"post":{"tags":["Auth"],"summary":"Inicio de Sesión","description":"Autentica un usuario existente y retorna tokens de acceso para mantener la sesión activa.","operationId":"login_api_auth_login_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserLogin"}}},"required":true},"responses":{"200":{"description":"Autenticación exitosa","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenPair"},"example":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...","token_type":"bearer"}}}},"401":{"description":"Credenciales inválidas o email no verificado","content":{"application/json":{"examples":{"credenciales_incorrectas":{"summary":"Email o contraseña incorrectos","value":{"detail":"Email o contraseña incorrectos"}},"email_no_verificado":{"summary":"Email no verificado","value":{"detail":"Debes verificar tu email antes de iniciar sesión. Revisa tu bandeja de entrada."}}}}}},"422":{"description":"Error de validación en los datos enviados","content":{"application/json":{"example":{"detail":"Email inválido"}}}}}}},"/api/auth/refresh":{"post":{"tags":["Auth"],"summary":"Renovar Tokens","description":"Renueva los tokens de acceso usando un refresh_token válido. Requiere tanto el access_token actual como el refresh_token.","operationId":"refresh_api_auth_refresh_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenRefreshRequest"}}},"required":true},"responses":{"200":{"description":"Tokens renovados exitosamente","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenPair"},"example":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...","refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...","token_type":"bearer"}}}},"401":{"description":"Token inválido o expirado","content":{"application/json":{"example":{"detail":"Token inválido"}}}},"403":{"description":"No autorizado - Chat token no permitido","content":{"application/json":{"example":{"detail":"No autorizado con chat token"}}}},"422":{"description":"Error de validación en los datos enviados","content":{"application/json":{"example":{"detail":"refresh_token requerido"}}}}}}},"/api/auth/logout":{"post":{"tags":["Auth"],"summary":"Cerrar Sesión","description":"Cierra la sesión del usuario e invalida los tokens de acceso. Una vez ejecutado, los tokens no podrán ser utilizados.","operationId":"logout_api_auth_logout_post","responses":{"204":{"description":"Sesión cerrada exitosamente"},"401":{"description":"Token inválido o expirado","content":{"application/json":{"example":{"detail":"Token inválido"}}}},"403":{"description":"No autorizado - Chat token no permitido","content":{"application/json":{"example":{"detail":"No autorizado con chat token"}}}}}}},"/api/auth/chat_token/create":{"post":{"tags":["Auth"],"summary":"Crear Token de Chat","description":"Genera un token especial para usar en WhatsApp con n8n. Este token tiene permisos limitados y no expira automáticamente.","operationId":"create_chat_token_api_auth_chat_token_create_post","responses":{"200":{"description":"Chat token creado exitosamente","content":{"application/json":{"schema":{},"example":{"chat_token":"cht_eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...","message":"Token de chat creado exitosamente"}}}},"401":{"description":"Token de sesión inválido o expirado","content":{"application/json":{"example":{"detail":"Token inválido"}}}},"409":{"description":"Ya existe un chat token activo","content":{"application/json":{"example":{"detail":"Chat token ya existe, debe revocarlo primero"}}}}}}},"/api/auth/chat_token/revoke":{"post":{"tags":["Auth"],"summary":"Revocar y Regenerar Token de Chat","description":"Revoca todos los chat tokens existentes y genera uno nuevo automáticamente. Operación segura que funciona incluso sin tokens previos.","operationId":"revoke_chat_token_api_auth_chat_token_revoke_post","responses":{"201":{"description":"Token revocado y nuevo token creado exitosamente","content":{"application/json":{"schema":{},"example":{"chat_token":"cht_eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."}}}},"401":{"description":"Token de sesión inválido o expirado","content":{"application/json":{"example":{"detail":"Token inválido"}}}}}}},"/api/auth/forgot-password":{"post":{"tags":["Auth"],"summary":"Solicitar Reseteo de Contraseña","description":"Envía un email con un token para resetear la contraseña cuando el usuario la olvida.","operationId":"forgot_password_api_auth_forgot_password_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ForgotPasswordRequest"}}},"required":true},"responses":{"200":{"description":"Email de reseteo enviado exitosamente","content":{"application/json":{"schema":{},"example":{"message":"Si el email existe en el sistema, recibirás un link para resetear tu contraseña"}}}},"422":{"description":"Email con formato inválido","content":{"application/json":{"example":{"detail":"Email inválido"}}}}}}},"/api/auth/reset-password":{"put":{"tags":["Auth"],"summary":"Resetear Contraseña","description":"Completa el reseteo de contraseña usando el token recibido por email.","operationId":"reset_password_api_auth_reset_password_put","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResetPasswordRequest"}}},"required":true},"responses":{"200":{"description":"Contraseña cambiada exitosamente","content":{"application/json":{"schema":{},"example":{"message":"Contraseña actualizada exitosamente. Todas las sesiones han sido cerradas."}}}},"400":{"description":"Token inválido, expirado o ya utilizado","content":{"application/json":{"example":{"detail":"Token de reseteo inválido o expirado"}}}},"422":{"description":"Datos de entrada inválidos","content":{"application/json":{"example":{"detail":"Token requerido"}}}}}}},"/api/users/password":{"put":{"tags":["Users"],"summary":"Cambiar contraseña del usuario autenticado","description":"Permite al usuario autenticado cambiar su contraseña actual por una nueva.","operationId":"change_user_password_api_users_password_put","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PasswordChangeRequest"}}},"required":true},"responses":{"200":{"description":"Contraseña cambiada exitosamente","content":{"application/json":{"schema":{},"example":{"detail":"Password changed successfully"}}}},"400":{"description":"Contraseña actual incorrecta o nueva contraseña inválida","content":{"application/json":{"example":{"detail":"Current password is incorrect"}}}},"401":{"description":"Token inválido o expirado","content":{"application/json":{"example":{"detail":"Token inválido"}}}},"422":{"description":"Error de validación en los datos enviados","content":{"application/json":{"example":{"detail":"Datos inválidos"}}}}}}},"/api/users/me":{"get":{"tags":["Users"],"summary":"Obtener Perfil Actual","description":"Obtiene la información completa del usuario autenticado actualmente. Endpoint típico para mostrar datos de perfil.","operationId":"read_current_user_me_api_users_me_get","responses":{"200":{"description":"Información del usuario obtenida exitosamente","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserOut"},"example":{"user_id":123,"name":"María González","email":"maria@ejemplo.com","created_at":"2025-01-15T08:30:00"}}}},"401":{"description":"Token inválido o expirado","content":{"application/json":{"example":{"detail":"Token inválido"}}}},"404":{"description":"Usuario no encontrado","content":{"application/json":{"example":{"detail":"User not found"}}}}}}},"/api/users/":{"put":{"tags":["Users"],"summary":"Actualizar Perfil","description":"Actualiza la información de perfil del usuario autenticado (nombre y/o email). Los campos son opcionales.","operationId":"update_current_user_api_users__put","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserUpdate"}}},"required":true},"responses":{"200":{"description":"Perfil actualizado exitosamente","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserOut"},"example":{"user_id":123,"name":"María González Actualizada","email":"maria.nueva@ejemplo.com","created_at":"2025-01-15T08:30:00"}}}},"400":{"description":"Email ya está en uso por otro usuario","content":{"application/json":{"example":{"detail":"Email already in use"}}}},"401":{"description":"Token inválido o expirado","content":{"application/json":{"example":{"detail":"Token inválido"}}}},"404":{"description":"Usuario no encontrado","content":{"application/json":{"example":{"detail":"User not found"}}}},"422":{"description":"Error de validación en los datos enviados","content":{"application/json":{"example":{"detail":"Email inválido"}}}}}},"delete":{"tags":["Users"],"summary":"Eliminar Cuenta","description":"Elimina permanentemente la cuenta del usuario autenticado y todos los datos asociados. OPERACIÓN IRREVERSIBLE.","operationId":"delete_current_user_api_users__delete","responses":{"204":{"description":"Cuenta eliminada exitosamente - IRREVERSIBLE"},"401":{"description":"Token inválido o expirado","content":{"application/json":{"example":{"detail":"Token inválido"}}}},"404":{"description":"Usuario no encontrado","content":{"application/json":{"example":{"detail":"User not found"}}}}}}},"/api/accounts/":{"get":{"tags":["Accounts","Chat"],"summary":"Listar Cuentas del Usuario","description":"Obtiene todas las cuentas financieras asociadas al usuario autenticado. Incluye cuentas bancarias, tarjetas, efectivo, etc.","operationId":"list_accounts_api_accounts__get","responses":{"200":{"description":"Lista de cuentas obtenida exitosamente","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/UserAccountOut"},"type":"array","title":"Response List Accounts Api Accounts  Get"},"example":[{"account_id":1,"name":"Cuenta Corriente Banco Nación","balance":15000.5,"account_type_id":1,"is_active":true,"created_at":"2025-01-15T10:30:00"},{"account_id":2,"name":"Tarjeta de Crédito Visa","balance":-2500.0,"account_type_id":2,"is_active":true,"created_at":"2025-01-16T14:20:00"}]}}},"401":{"description":"Token inválido o expirado","content":{"application/json":{"example":{"detail":"Token inválido"}}}}}},"post":{"tags":["Accounts","Chat"],"summary":"Crear Nueva Cuenta","description":"Crea una nueva cuenta financiera para el usuario autenticado. Permite configurar el tipo, nombre y balance inicial.","operationId":"create_account_api_accounts__post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserAccountCreate"}}},"required":true},"responses":{"201":{"description":"Cuenta creada exitosamente","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserAccountOut"},"example":{"account_id":15,"name":"Caja de Ahorro Galicia","balance":5000.0,"account_type_id":1,"is_active":true,"created_at":"2025-01-22T14:30:00"}}}},"400":{"description":"Error de validación o tipo de cuenta inválido","content":{"application/json":{"examples":{"invalid_account_type":{"summary":"Tipo de cuenta inexistente","value":{"detail":"Invalid account type"}},"duplicate_name":{"summary":"Nombre de cuenta duplicado","value":{"detail":"Account name already exists for this user"}}}}}},"401":{"description":"Token inválido o expirado","content":{"application/json":{"example":{"detail":"Token inválido"}}}},"422":{"description":"Error de validación en los datos enviados","content":{"application/json":{"example":{"detail":[{"loc":["body","name"],"msg":"field required","type":"value_error.missing"}]}}}}}}},"/api/accounts/{account_id}":{"get":{"tags":["Accounts"],"summary":"Obtener Cuenta por ID","description":"Obtiene los detalles completos de una cuenta específica del usuario autenticado mediante su ID único.","operationId":"get_account_api_accounts__account_id__get","parameters":[{"name":"account_id","in":"path","required":true,"schema":{"type":"integer","title":"Account Id"}}],"responses":{"200":{"description":"Cuenta encontrada exitosamente","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserAccountOut"},"example":{"account_id":5,"name":"Tarjeta de Crédito Mastercard","balance":-850.75,"account_type_id":2,"is_active":true,"created_at":"2025-01-10T16:45:00"}}}},"401":{"description":"Token inválido o expirado","content":{"application/json":{"example":{"detail":"Token inválido"}}}},"404":{"description":"Cuenta no encontrada o no pertenece al usuario","content":{"application/json":{"example":{"detail":"Account not found"}}}},"422":{"description":"ID de cuenta inválido (debe ser un número entero)","content":{"application/json":{"example":{"detail":[{"loc":["path","account_id"],"msg":"value is not a valid integer","type":"type_error.integer"}]}}}}}},"put":{"tags":["Accounts"],"summary":"Actualizar Cuenta","description":"Actualiza los datos de una cuenta específica del usuario autenticado. Permite modificar nombre, balance, tipo y estado.","operationId":"update_account_api_accounts__account_id__put","parameters":[{"name":"account_id","in":"path","required":true,"schema":{"type":"integer","title":"Account Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserAccountUpdate"}}}},"responses":{"200":{"description":"Cuenta actualizada exitosamente","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserAccountOut"},"example":{"account_id":5,"name":"Mercado pago","balance":1200.5,"account_type_id":2,"is_active":true,"created_at":"2025-01-10T16:45:00"}}}},"400":{"description":"Error de validación en los datos","content":{"application/json":{"examples":{"invalid_account_type":{"summary":"Tipo de cuenta inexistente","value":{"detail":"Invalid account type"}},"duplicate_name":{"summary":"Nombre ya existe para otro usuario","value":{"detail":"Account name already exists for this user"}}}}}},"401":{"description":"Token inválido o expirado","content":{"application/json":{"example":{"detail":"Token inválido"}}}},"404":{"description":"Cuenta no encontrada o no pertenece al usuario","content":{"application/json":{"example":{"detail":"Account not found"}}}},"422":{"description":"Error de validación en parámetros","content":{"application/json":{"example":{"detail":[{"loc":["path","account_id"],"msg":"value is not a valid integer","type":"type_error.integer"}]}}}}}},"delete":{"tags":["Accounts"],"summary":"Desactivar Cuenta","description":"Desactiva una cuenta específica del usuario autenticado. La cuenta se marca como inactiva pero se preservan todas las transacciones.","operationId":"delete_account_api_accounts__account_id__delete","parameters":[{"name":"account_id","in":"path","required":true,"schema":{"type":"integer","title":"Account Id"}}],"responses":{"204":{"description":"Cuenta desactivada exitosamente - Las transacciones se preservan"},"401":{"description":"Token inválido o expirado","content":{"application/json":{"example":{"detail":"Token inválido"}}}},"404":{"description":"Cuenta no encontrada o no pertenece al usuario","content":{"application/json":{"example":{"detail":"Account not found"}}}},"422":{"description":"ID de cuenta inválido (debe ser un número entero)","content":{"application/json":{"example":{"detail":[{"loc":["path","account_id"],"msg":"value is not a valid integer","type":"type_error.integer"}]}}}}}}},"/api/accounts/types":{"get":{"tags":["Accounts"],"summary":"Listar Tipos de Cuenta","description":"Obtiene todos los tipos de cuenta disponibles en el sistema para la creación de nuevas cuentas financieras.","operationId":"get_account_types_api_accounts_types_get","responses":{"200":{"description":"Tipos de cuenta obtenidos exitosamente","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/AccountTypeBase"},"type":"array","title":"Response Get Account Types Api Accounts Types Get"},"example":[{"account_type_id":1,"name":"Cuenta Corriente","description":"Cuenta bancaria para operaciones diarias"},{"account_type_id":2,"name":"Tarjeta de Crédito","description":"Línea de crédito revolving"},{"account_type_id":3,"name":"Efectivo","description":"Dinero en efectivo físico"},{"account_type_id":4,"name":"Inversiones","description":"Cuentas de inversión y ahorro"}]}}},"401":{"description":"Token inválido o expirado","content":{"application/json":{"example":{"detail":"Token inválido"}}}}}}},"/api/accounts/by_name/{name}":{"get":{"tags":["Accounts","Chat"],"summary":"Buscar Cuenta por Nombre","description":"Obtiene una cuenta específica del usuario autenticado mediante su nombre exacto. Útil para búsquedas desde WhatsApp.","operationId":"get_account_by_name_api_accounts_by_name__name__get","parameters":[{"name":"name","in":"path","required":true,"schema":{"type":"string","title":"Name"}}],"responses":{"200":{"description":"Cuenta encontrada exitosamente por nombre","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserAccountOut"},"example":{"account_id":8,"name":"Efectivo","balance":750.0,"account_type_id":3,"is_active":true,"created_at":"2025-01-18T09:15:00"}}}},"401":{"description":"Token inválido o expirado","content":{"application/json":{"example":{"detail":"Token inválido"}}}},"404":{"description":"Cuenta no encontrada con ese nombre","content":{"application/json":{"example":{"detail":"Account not found"}}}},"422":{"description":"Nombre inválido en la URL","content":{"application/json":{"example":{"detail":[{"loc":["path","name"],"msg":"string cannot be empty","type":"value_error"}]}}}}}}},"/api/transactions/":{"get":{"tags":["Transactions"],"summary":"Listar Todas las Transacciones","description":"Obtiene todas las transacciones del usuario autenticado, incluyendo información completa de categorías asociadas.","operationId":"get_all_transactions_api_transactions__get","responses":{"200":{"description":"Transacciones obtenidas exitosamente","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/UserTransactionOut"},"type":"array","title":"Response Get All Transactions Api Transactions  Get"},"example":[{"transaction_id":1,"user_id":123,"account_id":5,"category_id":2,"category":{"category_id":2,"description":"Supermercado"},"transaction_type_id":1,"amount":-75.5,"description":"Compras en Carrefour","transaction_date":"2025-01-22T14:30:00","created_at":"2025-01-22T14:35:00"},{"transaction_id":2,"user_id":123,"account_id":3,"category_id":8,"category":{"category_id":8,"description":"Salario"},"transaction_type_id":2,"amount":50000.0,"description":"Sueldo enero 2025","transaction_date":"2025-01-01T09:00:00","created_at":"2025-01-01T09:05:00"}]}}},"401":{"description":"Token inválido o expirado","content":{"application/json":{"example":{"detail":"Token inválido"}}}}}},"post":{"tags":["Transactions","Chat"],"summary":"Crear Nueva Transacción","description":"Crea una nueva transacción financiera. Las categorías se crean automáticamente si no existen. Optimizado para WhatsApp.","operationId":"create_transaction_api_transactions__post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserTransactionCreate"}}},"required":true},"responses":{"201":{"description":"Transacción creada exitosamente","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserTransactionOut"},"example":{"transaction_id":25,"user_id":123,"account_id":5,"category_id":12,"category":{"category_id":12,"description":"Combustible"},"transaction_type_id":1,"amount":-45.8,"description":"Carga nafta YPF","transaction_date":"2025-01-22T15:30:00","created_at":"2025-01-22T15:35:00"}}}},"400":{"description":"Error de validación de datos","content":{"application/json":{"examples":{"invalid_account":{"summary":"Cuenta no pertenece al usuario","value":{"detail":"Account not found or doesn't belong to user"}},"invalid_transaction_type":{"summary":"Tipo de transacción inválido","value":{"detail":"Invalid transaction type"}}}}}},"401":{"description":"Token inválido o expirado","content":{"application/json":{"example":{"detail":"Token inválido"}}}},"422":{"description":"Error de validación en parámetros","content":{"application/json":{"example":{"detail":[{"loc":["body","amount"],"msg":"field required","type":"value_error.missing"}]}}}}}}},"/api/transactions/by_date_range":{"get":{"tags":["Transactions","Chat"],"summary":"Filtrar Transacciones por Rango de Fechas","description":"Obtiene todas las transacciones del usuario autenticado dentro de un rango de fechas específico. Útil para análisis de períodos, reportes mensuales/trimestrales y consultas históricas. Accesible desde web y WhatsApp.","operationId":"get_transactions_by_date_range_api_transactions_by_date_range_get","parameters":[{"name":"start_date","in":"query","required":true,"schema":{"type":"string","title":"Start Date"}},{"name":"end_date","in":"query","required":true,"schema":{"type":"string","title":"End Date"}}],"responses":{"200":{"description":"Transacciones filtradas exitosamente por rango de fechas","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/UserTransactionOut"},"title":"Response Get Transactions By Date Range Api Transactions By Date Range Get"},"example":[{"transaction_id":15,"user_id":123,"account_id":5,"concept_id":8,"concept":{"concept_id":8,"description":"Supermercado"},"transaction_type_id":1,"amount":-125.75,"description":"Compras semanales","transaction_date":"2025-01-20T18:45:00","created_at":"2025-01-20T18:50:00"}]}}},"400":{"description":"Error en formato de fechas o rango inválido","content":{"application/json":{"examples":{"invalid_date_format":{"summary":"Formato de fecha inválido","value":{"detail":"Formato de fecha inválido. Use YYYY-MM-DD"}},"invalid_range":{"summary":"Rango de fechas inválido","value":{"detail":"La fecha de inicio debe ser anterior o igual a la fecha de fin"}},"range_too_large":{"summary":"Rango demasiado amplio","value":{"detail":"El rango de fechas no puede exceder 1 año"}}}}}},"401":{"description":"Token inválido o expirado","content":{"application/json":{"example":{"detail":"Token inválido"}}}},"422":{"description":"Error de validación en parámetros de consulta","content":{"application/json":{"example":{"detail":[{"loc":["query","start_date"],"msg":"field required","type":"value_error.missing"}]}}}}}}},"/api/transactions/{transaction_id}":{"get":{"tags":["Transactions"],"summary":"Obtener Transacción por ID","description":"Obtiene los detalles completos de una transacción específica del usuario autenticado mediante su ID único.","operationId":"get_transaction_api_transactions__transaction_id__get","parameters":[{"name":"transaction_id","in":"path","required":true,"schema":{"type":"integer","title":"Transaction Id"}}],"responses":{"200":{"description":"Transacción encontrada exitosamente","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserTransactionOut"},"example":{"transaction_id":15,"user_id":123,"account_id":8,"concept_id":5,"concept":{"concept_id":5,"description":"Restaurante"},"transaction_type_id":1,"amount":-89.5,"description":"Almuerzo en La Parolaccia","transaction_date":"2025-01-21T13:45:00","created_at":"2025-01-21T14:00:00"}}}},"401":{"description":"Token inválido o expirado","content":{"application/json":{"example":{"detail":"Token inválido"}}}},"404":{"description":"Transacción no encontrada o no pertenece al usuario","content":{"application/json":{"example":{"detail":"Transaction not found"}}}},"422":{"description":"ID de transacción inválido (debe ser un número entero)","content":{"application/json":{"example":{"detail":[{"loc":["path","transaction_id"],"msg":"value is not a valid integer","type":"type_error.integer"}]}}}}}},"put":{"tags":["Transactions"],"summary":"Actualizar Transacción","description":"Actualiza los datos de una transacción específica del usuario autenticado. Permite modificar monto, concepto, descripción, etc.","operationId":"update_transaction_api_transactions__transaction_id__put","parameters":[{"name":"transaction_id","in":"path","required":true,"schema":{"type":"integer","title":"Transaction Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserTransactionUpdate"}}}},"responses":{"200":{"description":"Transacción actualizada exitosamente","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserTransactionOut"},"example":{"transaction_id":15,"user_id":123,"account_id":8,"concept_id":7,"concept":{"concept_id":7,"description":"Restaurante Gourmet"},"transaction_type_id":1,"amount":-95.0,"description":"Almuerzo corregido - La Parolaccia","transaction_date":"2025-01-21T13:45:00","created_at":"2025-01-21T14:00:00"}}}},"400":{"description":"Error de validación en los datos","content":{"application/json":{"examples":{"invalid_account":{"summary":"Cuenta no pertenece al usuario","value":{"detail":"Account not found or doesn't belong to user"}},"invalid_concept":{"summary":"Concepto no pertenece al usuario","value":{"detail":"Concept not found or doesn't belong to user"}}}}}},"401":{"description":"Token inválido o expirado","content":{"application/json":{"example":{"detail":"Token inválido"}}}},"404":{"description":"Transacción no encontrada o no pertenece al usuario","content":{"application/json":{"example":{"detail":"Transaction not found"}}}},"422":{"description":"Error de validación en parámetros","content":{"application/json":{"example":{"detail":[{"loc":["path","transaction_id"],"msg":"value is not a valid integer","type":"type_error.integer"}]}}}}}},"delete":{"tags":["Transactions"],"summary":"Eliminar Transacción","description":"Elimina permanentemente una transacción específica del usuario autenticado. Actualiza el balance de la cuenta automáticamente.","operationId":"delete_transaction_api_transactions__transaction_id__delete","parameters":[{"name":"transaction_id","in":"path","required":true,"schema":{"type":"integer","title":"Transaction Id"}}],"responses":{"204":{"description":"Transacción eliminada exitosamente - El balance se actualiza automáticamente"},"401":{"description":"Token inválido o expirado","content":{"application/json":{"example":{"detail":"Token inválido"}}}},"404":{"description":"Transacción no encontrada o no pertenece al usuario","content":{"application/json":{"example":{"detail":"Transaction not found"}}}},"422":{"description":"ID de transacción inválido (debe ser un número entero)","content":{"application/json":{"example":{"detail":[{"loc":["path","transaction_id"],"msg":"value is not a valid integer","type":"type_error.integer"}]}}}}}}},"/api/transactions/by_account/{account_id}":{"get":{"tags":["Transactions"],"summary":"Listar Transacciones por Cuenta","description":"Obtiene todas las transacciones de una cuenta específica del usuario autenticado. Útil para análisis por cuenta.","operationId":"get_transactions_by_account_api_transactions_by_account__account_id__get","parameters":[{"name":"account_id","in":"path","required":true,"schema":{"type":"integer","title":"Account Id"}}],"responses":{"200":{"description":"Transacciones de la cuenta obtenidas exitosamente","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/UserTransactionOut"},"title":"Response Get Transactions By Account Api Transactions By Account  Account Id  Get"},"example":[{"transaction_id":10,"user_id":123,"account_id":5,"concept_id":3,"concept":{"concept_id":3,"description":"Supermercado"},"transaction_type_id":1,"amount":-85.4,"description":"Compras Carrefour","transaction_date":"2025-01-20T16:30:00","created_at":"2025-01-20T16:35:00"},{"transaction_id":12,"user_id":123,"account_id":5,"concept_id":15,"concept":{"concept_id":15,"description":"Combustible"},"transaction_type_id":1,"amount":-60.0,"description":"Carga Shell","transaction_date":"2025-01-22T08:15:00","created_at":"2025-01-22T08:20:00"}]}}},"401":{"description":"Token inválido o expirado","content":{"application/json":{"example":{"detail":"Token inválido"}}}},"404":{"description":"Cuenta no encontrada o no pertenece al usuario","content":{"application/json":{"example":{"detail":"Account not found or doesn't belong to user"}}}},"422":{"description":"ID de cuenta inválido (debe ser un número entero)","content":{"application/json":{"example":{"detail":[{"loc":["path","account_id"],"msg":"value is not a valid integer","type":"type_error.integer"}]}}}}}}},"/api/transactions/by_date/{tx_date}":{"get":{"tags":["Transactions"],"summary":"Listar Transacciones por Fecha","description":"Obtiene todas las transacciones del usuario autenticado en una fecha específica. Útil para análisis diario.","operationId":"get_transactions_by_date_api_transactions_by_date__tx_date__get","parameters":[{"name":"tx_date","in":"path","required":true,"schema":{"type":"string","title":"Tx Date"}}],"responses":{"200":{"description":"Transacciones de la fecha obtenidas exitosamente","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/UserTransactionOut"},"title":"Response Get Transactions By Date Api Transactions By Date  Tx Date  Get"},"example":[{"transaction_id":18,"user_id":123,"account_id":7,"concept_id":4,"concept":{"concept_id":4,"description":"Transporte"},"transaction_type_id":1,"amount":-12.5,"description":"Uber centro","transaction_date":"2025-01-22T09:15:00","created_at":"2025-01-22T09:20:00"},{"transaction_id":19,"user_id":123,"account_id":3,"concept_id":8,"concept":{"concept_id":8,"description":"Almuerzo"},"transaction_type_id":1,"amount":-45.0,"description":"Almuerzo trabajo","transaction_date":"2025-01-22T13:30:00","created_at":"2025-01-22T13:35:00"}]}}},"401":{"description":"Token inválido o expirado","content":{"application/json":{"example":{"detail":"Token inválido"}}}},"422":{"description":"Fecha inválida (debe ser formato ISO: YYYY-MM-DD)","content":{"application/json":{"example":{"detail":[{"loc":["path","tx_date"],"msg":"invalid date format, expected YYYY-MM-DD","type":"value_error.date"}]}}}}}}},"/api/transactions/types":{"get":{"tags":["Transactions"],"summary":"Listar Tipos de Transacción","description":"Obtiene todos los tipos de transacción disponibles en el sistema (ingreso/egreso). Datos maestros globales.","operationId":"get_transaction_types_api_transactions_types_get","responses":{"200":{"description":"Tipos de transacción obtenidos exitosamente","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/TransactionTypeBase"},"type":"array","title":"Response Get Transaction Types Api Transactions Types Get"},"example":[{"transaction_type_id":1,"name":"Egreso","description":"Salida de dinero - gastos, pagos, compras"},{"transaction_type_id":2,"name":"Ingreso","description":"Entrada de dinero - sueldos, ventas, ingresos"}]}}},"401":{"description":"Token inválido o expirado","content":{"application/json":{"example":{"detail":"Token inválido"}}}}}}},"/api/categories/":{"get":{"tags":["Categories"],"summary":"Listar categorías","description":"Lista todas las categorías del usuario autenticado.","operationId":"list_categories_api_categories__get","responses":{"200":{"description":"Lista de categorías","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/TransactionCategoryOut"},"type":"array","title":"Response List Categories Api Categories  Get"}}}}}},"post":{"tags":["Categories"],"summary":"Crear categoría","description":"Crea una categoría personalizada asociada al usuario autenticado.","operationId":"create_category_api_categories__post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CategoryCreatePayload"}}},"required":true},"responses":{"201":{"description":"Categoría creada exitosamente","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransactionCategoryOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/categories/{category_id}":{"get":{"tags":["Categories"],"summary":"Obtener Categoría por ID","description":"Obtiene los detalles de una categoría específica del usuario autenticado mediante su ID único.","operationId":"get_category_api_categories__category_id__get","parameters":[{"name":"category_id","in":"path","required":true,"schema":{"type":"integer","title":"Category Id"}}],"responses":{"200":{"description":"Datos completos de la categoría solicitada","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransactionCategoryOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["Categories"],"summary":"Actualizar Categoría","description":"Actualiza la descripción de una categoría específica del usuario autenticado. Útil para corregir o mejorar descripciones.","operationId":"update_category_api_categories__category_id__put","parameters":[{"name":"category_id","in":"path","required":true,"schema":{"type":"integer","title":"Category Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransactionCategoryUpdate"}}}},"responses":{"200":{"description":"Datos actualizados de la categoría","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransactionCategoryOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Categories"],"summary":"Eliminar categoría","description":"Elimina (soft delete) una categoría personalizada del usuario autenticado.","operationId":"delete_category_api_categories__category_id__delete","parameters":[{"name":"category_id","in":"path","required":true,"schema":{"type":"integer","title":"Category Id"}}],"responses":{"204":{"description":"Categoría eliminada"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/ping":{"get":{"tags":["Health Check"],"summary":"Health Check","description":"Verifica que la API está funcionando correctamente. Útil para monitoreo y health checks.","operationId":"ping_ping_get","responses":{"200":{"description":"API funcionando correctamente","content":{"application/json":{"schema":{},"example":{"message":"pong"}}}}}}}},"components":{"schemas":{"AccountTypeBase":{"properties":{"type_id":{"type":"integer","title":"Type Id"},"name":{"type":"string","title":"Name"}},"type":"object","required":["type_id","name"],"title":"AccountTypeBase"},"CategoryCreatePayload":{"properties":{"type_id":{"type":"integer","title":"Type Id"},"description":{"type":"string","title":"Description"},"color":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Color"}},"type":"object","required":["type_id","description"],"title":"CategoryCreatePayload"},"CategoryData":{"properties":{"description":{"type":"string","title":"Description"},"type_id":{"type":"integer","title":"Type Id"},"color":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Color"},"icon":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Icon"}},"type":"object","required":["description","type_id"],"title":"CategoryData","description":"Schema para crear/manejar categorías como objetos completos"},"ForgotPasswordRequest":{"properties":{"email":{"type":"string","format":"email","title":"Email"}},"type":"object","required":["email"],"title":"ForgotPasswordRequest"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"PasswordChangeRequest":{"properties":{"current_password":{"type":"string","title":"Current Password"},"new_password":{"type":"string","title":"New Password"}},"type":"object","required":["current_password","new_password"],"title":"PasswordChangeRequest","description":"Schema para cambio de contraseña.","example":{"current_password":"contraseña_actual","new_password":"nueva_contraseña_segura"}},"ResetPasswordRequest":{"properties":{"token":{"type":"string","title":"Token"},"new_password":{"type":"string","title":"New Password"}},"type":"object","required":["token","new_password"],"title":"ResetPasswordRequest"},"TokenPair":{"properties":{"access_token":{"type":"string","title":"Access Token"},"refresh_token":{"type":"string","title":"Refresh Token"},"token_type":{"type":"string","title":"Token Type","default":"bearer"}},"type":"object","required":["access_token","refresh_token"],"title":"TokenPair"},"TokenRefreshRequest":{"properties":{"refresh_token":{"type":"string","title":"Refresh Token"}},"type":"object","required":["refresh_token"],"title":"TokenRefreshRequest"},"TransactionCategoryOut":{"properties":{"category_id":{"type":"integer","title":"Category Id"},"user_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"User Id"},"type_id":{"type":"integer","title":"Type Id"},"description":{"type":"string","title":"Description"},"color":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Color"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"is_default":{"type":"boolean","title":"Is Default"}},"type":"object","required":["category_id","type_id","description","color","created_at","is_default"],"title":"TransactionCategoryOut"},"TransactionCategoryUpdate":{"properties":{"user_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"User Id"},"type_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Type Id"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"color":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Color"}},"type":"object","required":["user_id","type_id","description","color"],"title":"TransactionCategoryUpdate"},"TransactionTypeBase":{"properties":{"type_id":{"type":"integer","title":"Type Id"},"name":{"type":"string","title":"Name"}},"type":"object","required":["type_id","name"],"title":"TransactionTypeBase"},"UserAccountCreate":{"properties":{"name":{"type":"string","title":"Name"},"type_id":{"type":"integer","title":"Type Id"},"currency":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Currency"},"balance":{"type":"number","title":"Balance"}},"type":"object","required":["name","type_id","currency","balance"],"title":"UserAccountCreate"},"UserAccountOut":{"properties":{"name":{"type":"string","title":"Name"},"type_id":{"type":"integer","title":"Type Id"},"currency":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Currency"},"balance":{"type":"number","title":"Balance"},"account_id":{"type":"integer","title":"Account Id"},"user_id":{"type":"integer","title":"User Id"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"deleted":{"type":"boolean","title":"Deleted"}},"type":"object","required":["name","type_id","currency","balance","account_id","user_id","created_at","deleted"],"title":"UserAccountOut"},"UserAccountUpdate":{"properties":{"name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Name"},"type_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Type Id"},"currency":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Currency"},"balance":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Balance"}},"type":"object","required":["name","type_id","currency","balance"],"title":"UserAccountUpdate"},"UserCreate":{"properties":{"name":{"type":"string","title":"Name"},"email":{"type":"string","format":"email","title":"Email"},"password":{"type":"string","title":"Password"}},"type":"object","required":["name","email","password"],"title":"UserCreate"},"UserLogin":{"properties":{"email":{"type":"string","format":"email","title":"Email"},"password":{"type":"string","title":"Password"}},"type":"object","required":["email","password"],"title":"UserLogin"},"UserOut":{"properties":{"name":{"type":"string","title":"Name"},"email":{"type":"string","format":"email","title":"Email"},"user_id":{"type":"integer","title":"User Id"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["name","email","user_id","created_at"],"title":"UserOut"},"UserTransactionCreate":{"properties":{"account_id":{"type":"integer","title":"Account Id"},"amount":{"type":"number","title":"Amount"},"date":{"type":"string","format":"date-time","title":"Date"},"type_id":{"type":"integer","title":"Type Id"},"category_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Category Id"},"category":{"anyOf":[{"type":"string"},{"$ref":"#/components/schemas/CategoryData"},{"type":"null"}],"title":"Category"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"}},"type":"object","required":["account_id","amount","date","type_id"],"title":"UserTransactionCreate"},"UserTransactionOut":{"properties":{"transaction_id":{"type":"integer","title":"Transaction Id"},"user_id":{"type":"integer","title":"User Id"},"account_id":{"type":"integer","title":"Account Id"},"amount":{"type":"number","title":"Amount"},"date":{"type":"string","format":"date-time","title":"Date"},"category_id":{"type":"integer","title":"Category Id"},"category":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Category"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["transaction_id","user_id","account_id","amount","date","category_id","created_at"],"title":"UserTransactionOut"},"UserTransactionUpdate":{"properties":{"amount":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Amount"},"date":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Date"},"account_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Account Id"},"category_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Category Id"},"category":{"anyOf":[{"type":"string"},{"$ref":"#/components/schemas/CategoryData"},{"type":"null"}],"title":"Category"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"}},"type":"object","required":["amount","date","account_id","category_id"],"title":"UserTransactionUpdate"},"UserUpdate":{"properties":{"name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Name"},"email":{"anyOf":[{"type":"string","format":"email"},{"type":"null"}],"title":"Email"}},"type":"object","required":["name","email"],"title":"UserUpdate"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}},"securitySchemes":{"BearerAuth":{"type":"http","scheme":"bearer","bearerFormat":"JWT","description":"Token de sesión para autenticación web (Authorization: Bearer <token>)"},"ChatTokenAuth":{"type":"apiKey","in":"header","name":"X-Chat-Token","description":"Token de chat para autenticación desde WhatsApp/bots"}}},"security":[{"BearerAuth":[]},{"ChatTokenAuth":[]}]}